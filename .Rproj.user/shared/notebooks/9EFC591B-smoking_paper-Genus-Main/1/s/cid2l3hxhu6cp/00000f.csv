"0",""
"0","chrismb_phy %<>% "
"0","  mutate_sample_data("
"0","    smoking_detailed = case_when("
"0","      smoking_exposure_ga == ""Never"" ~ ""Never"","
"0","      "
"0","      smoking_exposure_ga == ""Former"" ~ paste(smoking_exposure_ga,"
"0","                                               years_since_quitting_binned, "
"0","                                               ""y""),"
"0","      smoking_exposure_ga == ""Current"" ~ paste(smoking_exposure_ga,"
"0","                                               current_tobacco_g_per_day_bin5cat,"
"0","                                               ""g""),"
"0","      TRUE ~ ""Other"""
"0","    ),"
"0","    smoking_detailed.Extra = case_when("
"0","      smoking_exposure_ga == ""Never"" ~ ""Never"","
"0","      "
"0","      smoking_exposure_ga == ""Former"" ~ paste(smoking_exposure_ga,"
"0","                                               years_since_quit.OR.reduced_smoking, "
"0","                                               ""y""),"
"0","      smoking_exposure_ga == ""Current"" ~ paste(smoking_exposure_ga,"
"0","                                               current_tobacco_g_per_day,"
"0","                                               ""g""),"
"0","      TRUE ~ ""Other"""
"0","    )"
"0","    "
"0","  )"
"2","Found more than one class ""phylo"" in cache; using the first, from namespace 'phyloseq'
"
"2","Also defined by ‘tidytree’
"
"2","Found more than one class ""phylo"" in cache; using the first, from namespace 'phyloseq'
"
"2","Also defined by ‘tidytree’
"
"2","Found more than one class ""phylo"" in cache; using the first, from namespace 'phyloseq'
"
"2","Also defined by ‘tidytree’
"
"2","Found more than one class ""phylo"" in cache; using the first, from namespace 'phyloseq'
"
"2","Also defined by ‘tidytree’
"
"0","nice_order_current <- sort(grep(""Current"", unique(chrismb_phy@sam_data$smoking_detailed), value = TRUE))[c(9,1,4,8,2,3,5,6,7,10)] %>% rev()"
"0",""
"0","nice_order_former <- sort(grep(""Former"", unique(chrismb_phy@sam_data$smoking_detailed), value = TRUE))[c(5,1,3,4,2,6)]"
"0",""
"0","final_levels <- c(nice_order_current,nice_order_former, ""Never"")"
"0",""
"0",""
"0","# SMOKING DETAILED 1 - make ordered factor, useful for plotting"
"0","chrismb_phy@sam_data$smoking_detailed <- factor(chrismb_phy@sam_data$smoking_detailed, levels = final_levels)"
"0",""
"0",""
"0","# SMOKING DETAILED EXTRA - do the same"
"0",""
"0","nice_order_current <- data.frame("
"0","  labels = sort(grep(""Current"", unique(chrismb_phy@sam_data$smoking_detailed.Extra), value = TRUE)), "
"0","  numbers = parse_number(sort(grep(""Current"", unique(chrismb_phy@sam_data$smoking_detailed.Extra), value = TRUE)))) %>% "
"0","  arrange(desc(numbers)) %>% "
"0","  .$labels"
"2","Warning: 1 parsing failure.
row col expected       actual
 28  -- a number Current NA g
"
"0","nice_order_former <- data.frame("
"0","  labels = sort(grep(""Former"", unique(chrismb_phy@sam_data$smoking_detailed.Extra), value = TRUE)), "
"0","  numbers = parse_number(sort(grep(""Former"", unique(chrismb_phy@sam_data$smoking_detailed.Extra), value = TRUE)))) %>% "
"0","  arrange(numbers) %>% "
"0","  .$labels"
"2","Warning: 1 parsing failure.
row col expected      actual
 54  -- a number Former NA y
"
"0","final_levels <- c(nice_order_current,nice_order_former, ""Never"")"
"0",""
"0","chrismb_phy@sam_data$smoking_detailed.Extra <- factor(chrismb_phy@sam_data$smoking_detailed.Extra, levels = final_levels)"
"0",""
"0","rm(nice_order_current, nice_order_former, final_levels)"
